<div class="container">
    <div class="pb-4">
        <h1 class="text-center">Importació</h1>
        <div class="container-fluid">
            <form class="form">
                <div class="container my-3 rounded rounded-5 border-discontinu text-center" appDraganddrop (fileDropped)="onFileDropped($event)">
                    <input id="fitxer" name="fitxer" type="file" #file (change)="getFile($event)" hidden>
                    <div class="text-center my-3">
                        <p><label for="fitxer" class="btn"><fa-icon [icon]="faUpload" size="4x"></fa-icon></label></p>
                        <p class="fw-bold" >Arrossega un fitxer aquí</p>
                        <p class="fw-bold" >o</p>
                        <label for="fitxer" class="inputFitxer fw-bold btn btn-info">{{ 'Selecciona un fitxer' }}</label>
                    </div>
                    <div class="my-4">
                        <div *ngIf="fileName">
                            <p class="text-success fw-bold">{{ 'Has seleccionat: ' + fileName }}</p>
                        </div>
                    </div>
                </div>
                <div class="container my-3">
                    <input type="submit" class="btn btn-dark" value="Pujar" *ngIf="!error" (click)="pujarFitxer()">
                    <button class="btn btn-danger float-end" (click)="reset()" *ngIf="fileName && !uploadProgress">Esborra el fitxer del navegador</button>
                </div>
                <div class="container my-2" *ngIf="error">
                    <span class="text-danger fw-bold">{{error}}</span>
                </div>
                <div class="progress"  *ngIf="uploadProgress">
                    <div class="progress-bar" role="progressbar" [style.width.%]="uploadProgress" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">{{uploadProgress}}%</div>
                </div>
                <div class="container my-2" *ngIf="uploadSuccess">
                    <div class="text-center">
                        <span class="text-success fw-bold">El servidor ha rebut el fitxer.</span>
                    </div>
                </div>
                <div class="container my-2" *ngIf="success; else noSuccess">
                    <div class="text-center">
                        <span class="text-success fw-bold">{{message}}</span>
                    </div>
                </div>
                <ng-template #noSuccess>
                    <div class="container my-2">
                        <div class="text-center">
                            <span class="text-danger fw-bold">{{message}}</span>
                        </div>
                    </div>
                </ng-template>
            </form>
            <hr class="border-3 border-top border-dark">
            <h2 class="text-center">Fitxer TSV d'exemple</h2>
            <p class="mx-5">Plantilla de dades del fitxer TSV. Es pot copiar i enganxar.</p>
            <div class="bg-dark text-white mx-5 rounded rouned-2 border border-3 border-info">
                <div class="m-5" style="white-space:pre;tab-size: 8;">
                    <span>Usuari	Nom-Cognoms	Cicle	Curs	Grup</span><br>
                    <span>ppi1	Pere Pi 1	SMX	2	A</span><br>
                    <span>ppi2	Pere Pi 2	SMX	1	B</span><br>
                    <span>ppi3	Pere Pi 3	SMX	1	C</span><br>
                    <span>ppi4	Pere Pi 4	SMX	1	D</span><br>
                    <span>ppi5	Pere Pi 5	SMX	1	E</span><br>
                    <span>ppi6	Pere Pi 6	SMX	2	A</span><br>
                    <span>ppi7	Pere Pi 7	SMX	2	B</span><br>
                    <span>ppi8	Pere Pi 8	SMX	2	C</span><br>
                    <span>ppi9	Pere Pi 9	ASIX	1</span><br>
                    <span>ppi10	Pere Pi 10	ASIX	2</span><br>
                    <span>ppi11	Pere Pi 11	DAW	1</span><br>
                    <span>ppi12	Pere Pi 12	DAW	2</span><br>
                    <span>a.alumne1	alumne 1	SMX	1	A</span><br>
                    <span>a.alumne2	alumne 2	SMX	1	B</span><br>
                    <span>a.alumne3	alumne 3	SMX	1	C</span><br>
                    <span>a.alumne4	alumne 4	SMX	1	D</span><br>
                    <span>a.alumne5	alumne 5	SMX	1	E</span><br>
                    <span>a.alumne6	alumne 6	SMX	2	A</span><br>
                    <span>a.alumne7	alumne 7	SMX	2	B</span><br>
                    <span>a.alumne8	alumne 8	SMX	2	C</span><br>
                    <span>a.alumne9	alumne 9	DAW	1	</span><br>
                    <span>a.alumne10	alumne 10	ASIX	2	</span><br>
                    <span>a.alumne11	alumne 11	DAW	1	</span><br>
                    <span>a.alumne12	alumne 12	DAW	2	</span>
                </div>
            </div>
        </div>
    </div>
</div>
